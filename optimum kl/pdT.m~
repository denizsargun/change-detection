classdef pdT
    % probability of detection test
    properties
        ex
        method
        pdIt
        utility
    end
    
    methods
        function obj = pdT(method)
            obj.method = method;
            obj.ex = obj.method.ex;
            obj.pdIt = obj.test.pdIt;
            obj.utility = obj.ex.utility;
        end
        
        function test(obj)
            numberOfDetections = 0;
            % probability of detection
            obj.ex.changedDist = obj.utility.random_dist_mean(obj.ex.beta);
            for i = 1:obj.pdIt
                empDist = obj.utility.realize(obj.ex.changedDist);
                numberOfDetections = numberOfDetections ...
                    +obj.method.is_change(empDist);
                obj.ex.changedDist = obj.utility.random_dist_mean(obj.ex.beta);
            end
            
        end
        
    end
end

